
\chapter{Evaluation and Discussion}
\label{sec:evaluation}

\section{Evaluation Metrics}
\label{sec:evaluation:metrics}

\begin{itemize}
  \item SFAM
        \begin{itemize}
          \item accuracy and F1 with regard to labels from select examples of the attribute sentence generation (was the sentence used or not)
        \end{itemize}
  \item LISA
        \begin{itemize}
          \item MSE, MAE, avg. cosine similarity compared to SFAM prediction
          \item accuracy and F1 compared to SFAM where both predictions are rounded
        \end{itemize}
  \item embedding model
        \begin{itemize}
          \item accuracy through triplet loss
                %? \item variance inside groups
        \end{itemize}
  \item steering methods
        \begin{itemize}
          \item improvement of L2 distance to group median compared to embedding of unsteered generation
                \begin{itemize}
                  \item how strong is the steering?
                \end{itemize}
          \item cosine similarity between the vector that is the difference between embedding of steered and unsteered generation
                \begin{itemize}
                  \item is the steering in the correct direction?
                \end{itemize}
                %? \item the absolute times that the resulting group is the correct one (according to the embedding)
        \end{itemize}
\end{itemize}


\begin{figure}
  \begin{center}
    \input{figures/tikz/steering-metrics-plot.tex}
  \end{center}
  \captionsetup{singlelinecheck=off}
  \caption[]{%
    All answers that are generated during steering are embedded using the \ac{lisa} model with the embedding head. For each question, the \ac{llm} is prompted without any steering to create an unsteered baseline. Then, for each group and each steering type, the model is prompted with the same question. The median group embedding is derived from the embeddings of all answers that have been used to train \ac{sfam} and \ac{lisa}.
    The quality of each steering method is measured with different metrics:
    \begin{enumerate*}
      \item \textbf{Steering Direction Correctness:} The cosine similarity between the steering effect vector and the optimal steering effect vector.
      \item \textbf{Steering Effect:} The euclidean distance of the steering effect vector.
      \item \textbf{Optimal Steering Effect:} The euclidean distace between the unsteered embedding and the median group embedding.
      \item \textbf{Possible Improvement:} The euclidean distance between the steered embedding and the median group embedding.
            % \item difference between steering effect and optimal steering effect
            % \item difference (or ratio?) between steering effect and possible steering effect
    \end{enumerate*}
  }
  \label{fig:steeringMetrics}
\end{figure}
